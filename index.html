<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡πÅ‡∏Ç‡πá‡∏á‡∏Ç‡∏≠‡∏á‡∏™‡∏´‡∏Å‡∏£‡∏ì‡πå</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Kanit', 'sans-serif'],
                    },
                    colors: {
                        primary: '#26A69A',
                        secondary: '#AED581',
                        accent: '#FFCA28',
                        danger: '#EF5350',
                        info: '#0288D1',
                        warn: '#FBC02D',
                        purple: '#4A2C6D'
                    }
                }
            }
        }
    </script>

    <!-- Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- SheetJS for Excel Import -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>

    <!-- MathJax for Math Formulas -->
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script>

    <!-- Quill WYSIWYG Editor (No API Key Required) -->
    <link href="https://cdn.jsdelivr.net/npm/quill@2.0.2/dist/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/quill@2.0.2/dist/quill.js"></script>
</head>

<body class="text-gray-700 dark:bg-gray-900 dark:text-gray-200 transition-colors duration-200">

    <!-- Loading Spinner -->
    <div id="loader" class="loading-overlay">
        <div class="text-center">
            <div class="spinner mx-auto mb-2"></div>
            <p class="text-primary font-bold">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>
        </div>
    </div>

    <!-- Layout -->
    <div class="min-h-screen flex flex-col">
        <!-- Header -->
        <header class="bg-gradient-to-r from-primary to-purple text-white p-4 shadow-lg shrink-0">
            <div class="container mx-auto flex justify-between items-center">
                <div class="flex items-center gap-3">
                    <span class="text-3xl cursor-pointer select-none" id="secret-login-trigger"
                        title="‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡πÅ‡∏Ç‡πá‡∏á">üèõÔ∏è</span>
                    <div>
                        <h1 class="text-2xl font-bold">‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡πÅ‡∏Ç‡πá‡∏á‡∏Ç‡∏≠‡∏á‡∏™‡∏´‡∏Å‡∏£‡∏ì‡πå</h1>
                        <p class="text-sm opacity-90">‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏õ‡∏µ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 2568</p>
                    </div>
                </div>
                <div class="flex items-center gap-2">
                    <button id="theme-toggle" onclick="toggleDarkMode()"
                        class="bg-white/20 hover:bg-white/30 text-white p-2 rounded-full transition"
                        title="‡∏™‡∏•‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î‡∏°‡∏∑‡∏î/‡∏™‡∏ß‡πà‡∏≤‡∏á">
                        <span id="theme-icon">üåô</span>
                    </button>
                    <button id="admin-btn" onclick="adminLogin()"
                        class="hidden bg-white/20 hover:bg-white/30 text-white p-2 rounded-full transition"
                        title="‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö">
                        üîí
                    </button>
                    <button id="admin-logout-btn" onclick="adminLogout()"
                        class="hidden bg-red-500 hover:bg-red-600 text-white text-xs px-3 py-1 rounded transition">
                        ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="flex-grow container mx-auto p-4 space-y-6">

            <!-- Dashboard Widgets -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <!-- Card 1: Total Coop -->
                <div
                    class="bg-white dark:bg-gray-800 rounded-xl shadow p-4 border-l-4 border-primary hover:shadow-md transition">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="text-gray-500 dark:text-gray-400 text-sm">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏´‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                            <h3 class="text-3xl font-bold text-gray-800 dark:text-white" id="stat-total">0</h3>
                        </div>
                        <div class="bg-primary/10 p-3 rounded-full text-primary text-xl">üè¢</div>
                    </div>
                </div>
                <!-- Card 2: Class 1 -->
                <div
                    class="bg-white dark:bg-gray-800 rounded-xl shadow p-4 border-l-4 border-secondary hover:shadow-md transition">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="text-gray-500 dark:text-gray-400 text-sm">‡∏ä‡∏±‡πâ‡∏ô 1 (‡πÄ‡∏Ç‡πâ‡∏°‡πÅ‡∏Ç‡πá‡∏á‡∏°‡∏≤‡∏Å)</p>
                            <h3 class="text-3xl font-bold text-gray-800 dark:text-white" id="stat-c1">0</h3>
                        </div>
                        <div class="bg-secondary/10 p-3 rounded-full text-secondary text-xl">üèÜ</div>
                    </div>
                </div>
                <!-- Card 3: Class 2 -->
                <div
                    class="bg-white dark:bg-gray-800 rounded-xl shadow p-4 border-l-4 border-accent hover:shadow-md transition">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="text-gray-500 dark:text-gray-400 text-sm">‡∏ä‡∏±‡πâ‡∏ô 2 (‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á)</p>
                            <h3 class="text-3xl font-bold text-gray-800 dark:text-white" id="stat-c2">0</h3>
                        </div>
                        <div class="bg-accent/10 p-3 rounded-full text-accent text-xl">‚öñÔ∏è</div>
                    </div>
                </div>
                <!-- Card 4: Class 3 -->
                <div
                    class="bg-white dark:bg-gray-800 rounded-xl shadow p-4 border-l-4 border-danger hover:shadow-md transition">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="text-gray-500 dark:text-gray-400 text-sm">‡∏ä‡∏±‡πâ‡∏ô 3 (‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á)</p>
                            <h3 class="text-3xl font-bold text-gray-800 dark:text-white" id="stat-c3">0</h3>
                        </div>
                        <div class="bg-danger/10 p-3 rounded-full text-danger text-xl">üö©</div>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white dark:bg-gray-800 p-4 rounded-xl shadow">
                    <h3
                        class="text-lg font-bold mb-4 text-gray-700 dark:text-gray-200 border-b dark:border-gray-700 pb-2">
                        üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏ä‡∏±‡πâ‡∏ô</h3>
                    <div class="aspect-video relative">
                        <canvas id="chartClass"></canvas>
                    </div>
                </div>
                <div class="bg-white dark:bg-gray-800 p-4 rounded-xl shadow">
                    <h3
                        class="text-lg font-bold mb-4 text-gray-700 dark:text-gray-200 border-b dark:border-gray-700 pb-2">
                        üìà ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏° (YOY)</h3>
                    <div class="aspect-video relative">
                        <canvas id="chartTrend"></canvas>
                    </div>
                </div>
            </div>

            <!-- Action Bar -->
            <div
                class="flex flex-col md:flex-row justify-between items-center gap-4 bg-white dark:bg-gray-800 p-4 rounded-xl shadow">
                <!-- Filters -->
                <div class="flex flex-wrap gap-2 w-full md:w-auto">
                    <select id="filter-sector"
                        class="border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary outline-none dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏Å‡∏•‡∏∏‡πà‡∏°)</option>
                        <option value="agro">‡∏™‡∏´‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏ô‡∏†‡∏≤‡∏Ñ‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏©‡∏ï‡∏£</option>
                        <option value="non-agro">‡∏™‡∏´‡∏Å‡∏£‡∏ì‡πå‡∏ô‡∏≠‡∏Å‡∏†‡∏≤‡∏Ñ‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏©‡∏ï‡∏£</option>
                        <option value="farmer_group">‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏Å‡∏£</option>
                    </select>
                    <select id="filter-agency"
                        class="border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary outline-none dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô)</option>
                    </select>
                    <select id="filter-type"
                        class="border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary outline-none dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó)</option>
                    </select>
                    <select id="filter-grade"
                        class="border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary outline-none dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô)</option>
                        <option value="‡∏ä‡∏±‡πâ‡∏ô 1">‡∏ä‡∏±‡πâ‡∏ô 1</option>
                        <option value="‡∏ä‡∏±‡πâ‡∏ô 2">‡∏ä‡∏±‡πâ‡∏ô 2</option>
                        <option value="‡∏ä‡∏±‡πâ‡∏ô 3">‡∏ä‡∏±‡πâ‡∏ô 3</option>
                    </select>
                    <select id="filter-trend"
                        class="border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary outline-none dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°)</option>
                        <option value="‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô">üü¢ ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô</option>
                        <option value="‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°">üü° ‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°</option>
                        <option value="‡πÅ‡∏¢‡πà‡∏•‡∏á">üî¥ ‡πÅ‡∏¢‡πà‡∏•‡∏á</option>
                    </select>
                    <input type="text" id="search-box" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠/‡∏£‡∏´‡∏±‡∏™..."
                        class="border rounded-lg px-3 py-2 text-sm w-full md:w-48 focus:ring-2 focus:ring-primary outline-none dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                </div>

                <!-- Buttons -->
                <div class="flex gap-2">
                    <button onclick="openModal()"
                        class="bg-primary hover:bg-teal-600 text-white px-4 py-2 rounded-lg shadow transition flex items-center gap-2">
                        <span>‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</span>
                    </button>
                    <input type="file" id="excel-file" accept=".xlsx, .xls" class="hidden"
                        onchange="handleExcelImport(this)">
                    <button onclick="document.getElementById('excel-file').click()"
                        class="bg-secondary hover:bg-green-600 text-white px-4 py-2 rounded-lg shadow transition flex items-center gap-2">
                        <span>üì• Import Excel</span>
                    </button>
                </div>
            </div>

            <!-- Data Table -->
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow overflow-hidden">
                <div class="table-container">
                    <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                        <thead class="text-xs text-white uppercase bg-primary sticky top-0">
                            <tr>
                                <th class="px-4 py-3">‡∏ó‡∏µ‡πà</th>
                                <th id="th-code" class="px-4 py-3 hidden">‡∏£‡∏´‡∏±‡∏™</th>
                                <th class="px-4 py-3">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏´‡∏Å‡∏£‡∏ì‡πå</th>
                                <th class="px-4 py-3">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</th>
                                <th class="px-4 py-3">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
                                <th class="px-4 py-3 text-center">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°</th>
                                <th class="px-4 py-3 text-center">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏ä‡∏±‡πâ‡∏ô</th>
                                <th class="px-4 py-3 text-center">‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°</th>
                                <th class="px-4 py-3 text-center">Action</th>
                            </tr>
                        </thead>
                        <tbody id="table-body" class="divide-y divide-gray-100 dark:divide-gray-700">
                            <!-- Rows -->
                        </tbody>
                    </table>
                </div>
                <!-- Pagination could go here -->
                <div class="p-3 text-xs text-gray-400 text-center" id="row-count">‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</div>
            </div>

        </main>

        <!-- Footer -->
        <footer class="text-center p-4 text-gray-400 text-xs">
        </footer>
    </div>

    <!-- Import Preview Modal -->
    <div id="importModal" class="fixed inset-0 z-50 hidden overflow-y-auto" aria-labelledby="modal-title" role="dialog"
        aria-modal="true">
        <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity dark:bg-gray-900 dark:bg-opacity-80"
                aria-hidden="true" onclick="closeImportModal()"></div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>

            <div
                class="inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-5xl sm:w-full">
                <div class="bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <div class="sm:flex sm:items-start">
                        <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full">
                            <h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-white mb-4">üìÇ
                                ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤
                                (Preview)</h3>

                            <div class="flex items-center gap-4 mb-4 bg-gray-50 dark:bg-gray-700 p-3 rounded">
                                <div>
                                    <label
                                        class="block text-xs font-bold text-gray-700 dark:text-gray-300">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡πÅ‡∏ñ‡∏ß‡∏ó‡∏µ‡πà
                                        (Excel
                                        Row):</label>
                                    <input type="number" id="import-start-row" value="2" min="1"
                                        class="border rounded p-1 w-24 text-center dark:bg-gray-600 dark:border-gray-500 dark:text-white"
                                        onchange="renderImportPreview()">
                                </div>
                                <div class="text-xs text-gray-500 dark:text-gray-400 pt-4">
                                    * ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÅ‡∏ñ‡∏ß‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á (‡∏Ç‡πâ‡∏≤‡∏° Header)<br>
                                    * ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏û‡∏ö: <span id="import-total-rows"
                                        class="font-bold text-primary">0</span> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
                                </div>

                                <div class="flex items-center gap-2 border-l pl-4 border-gray-300 dark:border-gray-500">
                                    <input type="checkbox" id="chk-farmer-group"
                                        class="w-4 h-4 text-primary rounded border-gray-300 focus:ring-primary">
                                    <label for="chk-farmer-group" class="text-sm cursor-pointer select-none">
                                        <span
                                            class="font-bold text-gray-700 dark:text-gray-200">‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏Å‡∏£</span>
                                        <br><span class="text-xs text-gray-500 dark:text-gray-400">(‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡∏ä‡∏µ‡πâ‡∏ß‡∏±‡∏î
                                            3.5)</span>
                                    </label>
                                </div>
                            </div>

                            <div class="overflow-x-auto max-h-[50vh] border dark:border-gray-600 rounded">
                                <table class="min-w-full text-xs text-left text-gray-500 dark:text-gray-300">
                                    <thead class="bg-gray-100 dark:bg-gray-600 sticky top-0">
                                        <tr>
                                            <th class="px-2 py-1">Excel Row</th>
                                            <th class="px-2 py-1">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô (B)</th>
                                            <th class="px-2 py-1">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏´‡∏Å‡∏£‡∏ì‡πå (C)</th>
                                            <th class="px-2 py-1">‡∏£‡∏´‡∏±‡∏™ (D)</th>
                                            <th class="px-2 py-1">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó (E)</th>
                                        </tr>
                                    </thead>
                                    <tbody id="import-preview-body">
                                        <!-- Preview Rows -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                    <button type="button" onclick="confirmImport()"
                        class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤</button>
                    <button type="button" onclick="closeImportModal()"
                        class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm dark:bg-gray-600 dark:text-white dark:border-gray-500 dark:hover:bg-gray-500">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Form -->
    <div id="dataModal" class="fixed inset-0 z-50 hidden overflow-y-auto" aria-labelledby="modal-title" role="dialog"
        aria-modal="true">
        <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity dark:bg-gray-900 dark:bg-opacity-80"
                aria-hidden="true" onclick="closeModal()"></div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>

            <div
                class="inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full">
                <form id="mainForm" onsubmit="handleFormSubmit(event)">
                    <input type="hidden" name="rowId" id="rowId">

                    <div
                        class="bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 flex justify-between items-center border-b dark:border-gray-600">
                        <h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-white" id="modal-title">üìù
                            ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h3>
                        <button type="button" onclick="closeModal()"
                            class="text-gray-400 hover:text-gray-500 text-2xl">&times;</button>
                    </div>

                    <div class="px-4 py-5 sm:p-6 max-h-[70vh] overflow-y-auto">
                        <!-- Sections -->
                        <div class="space-y-6">

                            <!-- 1. General Info -->
                            <div>
                                <h4 class="text-primary font-bold mb-2 border-b">1. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div><label
                                            class="block text-xs font-bold mb-1 dark:text-gray-300">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏´‡∏Å‡∏£‡∏ì‡πå</label><input
                                            type="text" name="coop_name" required
                                            class="w-full border rounded p-2 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    </div>
                                    <div><label class="block text-xs font-bold mb-1 dark:text-gray-300">‡∏£‡∏´‡∏±‡∏™ (13
                                            ‡∏´‡∏•‡∏±‡∏Å)</label><input type="text" name="coop_code" required
                                            class="w-full border rounded p-2 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    </div>
                                    <div><label
                                            class="block text-xs font-bold mb-1 dark:text-gray-300">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</label><input
                                            type="text" name="agency"
                                            class="w-full border rounded p-2 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    </div>
                                    <div><label
                                            class="block text-xs font-bold mb-1 dark:text-gray-300">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</label><input
                                            type="text" name="coop_type"
                                            class="w-full border rounded p-2 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    </div>
                                </div>
                            </div>

                            <!-- 2. Dimensions -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <!-- Dim 1 -->
                                <div class="bg-purple-50 dark:bg-purple-900/20 p-3 rounded">
                                    <h5 class="text-purple font-bold text-sm mb-2">‡∏°‡∏¥‡∏ï‡∏¥‡∏ó‡∏µ‡πà 1
                                        ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h5>
                                    <div class="grid grid-cols-3 gap-2">
                                        <input type="number" step="0.01" placeholder="1.1" name="d1_1"
                                            class="border p-1 text-sm rounded score-input dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                        <input type="number" step="0.01" placeholder="1.2" name="d1_2"
                                            class="border p-1 text-sm rounded score-input dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                        <input type="number" step="0.01" placeholder="1.3" name="d1_3"
                                            class="border p-1 text-sm rounded score-input dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    </div>
                                </div>
                                <!-- Dim 4 -->
                                <div class="bg-orange-50 dark:bg-orange-900/20 p-3 rounded">
                                    <h5 class="text-orange-600 font-bold text-sm mb-2">‡∏°‡∏¥‡∏ï‡∏¥‡∏ó‡∏µ‡πà 4
                                        ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏á‡∏≤‡∏ô</h5>
                                    <div class="grid grid-cols-4 gap-2">
                                        <input type="number" step="0.01" placeholder="4.1" name="d4_1"
                                            class="border p-1 text-sm rounded score-input dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                        <input type="number" step="0.01" placeholder="4.2" name="d4_2"
                                            class="border p-1 text-sm rounded score-input dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                        <input type="number" step="0.01" placeholder="4.3" name="d4_3"
                                            class="border p-1 text-sm rounded score-input dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                        <input type="number" step="0.01" placeholder="4.4" name="d4_4"
                                            class="border p-1 text-sm rounded score-input dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    </div>
                                </div>
                                <!-- Dim 2 -->
                                <div class="bg-green-50 dark:bg-green-900/20 p-3 rounded">
                                    <h5 class="text-green-600 font-bold text-sm mb-2">‡∏°‡∏¥‡∏ï‡∏¥‡∏ó‡∏µ‡πà 2
                                        ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</h5>
                                    <div class="grid grid-cols-3 gap-2">
                                        <input type="number" step="0.01" placeholder="2.1" name="d2_1"
                                            class="border p-1 text-sm rounded score-input dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                        <input type="number" step="0.01" placeholder="2.2" name="d2_2"
                                            class="border p-1 text-sm rounded score-input dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                        <input type="number" step="0.01" placeholder="2.3" name="d2_3"
                                            class="border p-1 text-sm rounded score-input dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                        <input type="number" step="0.01" placeholder="2.4" name="d2_4"
                                            class="border p-1 text-sm rounded score-input dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                        <input type="number" step="0.01" placeholder="2.5" name="d2_5"
                                            class="border p-1 text-sm rounded score-input dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                        <input type="number" step="0.01" placeholder="2.6" name="d2_6"
                                            class="border p-1 text-sm rounded score-input dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    </div>
                                </div>
                                <!-- Dim 3 -->
                                <div class="bg-blue-50 dark:bg-blue-900/20 p-3 rounded">
                                    <h5 class="text-blue-600 font-bold text-sm mb-2">‡∏°‡∏¥‡∏ï‡∏¥‡∏ó‡∏µ‡πà 3
                                        ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£</h5>
                                    <div class="grid grid-cols-3 gap-2 mb-2">
                                        <input type="number" step="0.01" placeholder="3.1" name="d3_1"
                                            class="border p-1 text-sm rounded score-input dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                        <input type="number" step="0.01" placeholder="3.2" name="d3_2"
                                            class="border p-1 text-sm rounded score-input dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                        <input type="number" step="0.01" placeholder="3.3" name="d3_3"
                                            class="border p-1 text-sm rounded score-input dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                        <input type="number" step="0.01" placeholder="3.4" name="d3_4"
                                            class="border p-1 text-sm rounded score-input dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                        <input type="number" step="0.01" placeholder="3.5" name="d3_5"
                                            class="border p-1 text-sm rounded score-input dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    </div>
                                    <input type="text" placeholder="‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏Å‡∏ì‡∏ë‡πå" name="d3_fail_text"
                                        class="w-full border p-1 text-sm rounded score-input dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                </div>
                            </div>

                            <!-- Live Calc Preview -->
                            <div class="bg-gray-100 dark:bg-gray-700 p-2 rounded text-center">
                                <span class="font-bold text-gray-600 dark:text-gray-300">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°‡∏Ñ‡∏≤‡∏î‡∏Å‡∏≤‡∏£‡∏ì‡πå: </span>
                                <span id="live-score" class="text-xl font-bold text-primary">0</span>
                            </div>

                            <!-- 3. Comparison & Details -->
                            <div>
                                <h4 class="text-primary font-bold mb-2 border-b">3. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö</h4>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div><label class="block text-xs font-bold dark:text-gray-300">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏ä‡∏±‡πâ‡∏ô‡∏õ‡∏µ
                                            68</label>
                                        <select name="grade"
                                            class="w-full border rounded p-1 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                            <option value="">- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å -</option>
                                            <option value="‡∏ä‡∏±‡πâ‡∏ô 1">‡∏ä‡∏±‡πâ‡∏ô 1</option>
                                            <option value="‡∏ä‡∏±‡πâ‡∏ô 2">‡∏ä‡∏±‡πâ‡∏ô 2</option>
                                            <option value="‡∏ä‡∏±‡πâ‡∏ô 3">‡∏ä‡∏±‡πâ‡∏ô 3</option>
                                        </select>
                                    </div>
                                    <div><label class="block text-xs font-bold dark:text-gray-300">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏ä‡∏±‡πâ‡∏ô‡∏õ‡∏µ
                                            67</label>
                                        <select name="grade_67"
                                            class="w-full border rounded p-1 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                            <option value="">- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å -</option>
                                            <option value="‡∏ä‡∏±‡πâ‡∏ô 1">‡∏ä‡∏±‡πâ‡∏ô 1</option>
                                            <option value="‡∏ä‡∏±‡πâ‡∏ô 2">‡∏ä‡∏±‡πâ‡∏ô 2</option>
                                            <option value="‡∏ä‡∏±‡πâ‡∏ô 3">‡∏ä‡∏±‡πâ‡∏ô 3</option>
                                        </select>
                                    </div>
                                    <div><label class="block text-xs font-bold dark:text-gray-300">‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡∏á‡∏ö
                                            (‡∏õ‡∏µ)</label><input type="number" name="no_balance_years"
                                            class="w-full border rounded p-1 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    </div>
                                    <div><label class="block text-xs font-bold dark:text-gray-300">‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡πÉ‡∏´‡∏ç‡πà
                                            68</label>
                                        <select name="agm_68"
                                            class="w-full border rounded p-1 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                            <option value="‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡πÅ‡∏•‡πâ‡∏ß">‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡πÅ‡∏•‡πâ‡∏ß</option>
                                            <option value="‡πÑ‡∏°‡πà‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°">‡πÑ‡∏°‡πà‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°</option>
                                        </select>
                                    </div>
                                    <div><label
                                            class="block text-xs font-bold dark:text-gray-300">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏õ‡∏µ</label><input
                                            type="text" name="change_year_note"
                                            class="w-full border rounded p-1 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    </div>
                                    <div class="col-span-2"><label
                                            class="block text-xs font-bold dark:text-gray-300">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</label><input
                                            type="text" name="remark"
                                            class="w-full border rounded p-1 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                    <div class="bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                        <button type="submit"
                            class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-teal-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                        <button type="button" onclick="closeModal()"
                            class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm dark:bg-gray-600 dark:text-white dark:border-gray-500 dark:hover:bg-gray-500">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Detail Modal -->
    <div id="detailModal" class="fixed inset-0 z-50 hidden overflow-y-auto" aria-labelledby="modal-title" role="dialog"
        aria-modal="true">
        <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity dark:bg-gray-900 dark:bg-opacity-80"
                aria-hidden="true" onclick="closeDetailModal()"></div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>

            <div
                class="inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full">
                <div
                    class="bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 flex justify-between items-center border-b dark:border-gray-600">
                    <div>
                        <h3 class="text-lg leading-6 font-bold text-gray-900 dark:text-white" id="detail-title">
                            ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</h3>
                        <p class="text-xs text-gray-500 dark:text-gray-400" id="detail-subtitle">-</p>
                    </div>
                    <button type="button" onclick="closeDetailModal()"
                        class="text-gray-400 hover:text-gray-500 text-2xl">&times;</button>
                </div>

                <div class="px-4 py-5 sm:p-6 max-h-[70vh] overflow-y-auto">
                    <!-- Tabs -->
                    <div class="mb-4 border-b border-gray-200 dark:border-gray-600">
                        <nav class="-mb-px flex space-x-4" aria-label="Tabs" id="detail-tabs">
                            <button onclick="switchTab(1)" id="tab-1"
                                class="tab-btn border-primary text-primary whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm">‡∏°‡∏¥‡∏ï‡∏¥‡∏ó‡∏µ‡πà
                                1</button>
                            <button onclick="switchTab(2)" id="tab-2"
                                class="tab-btn border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm">‡∏°‡∏¥‡∏ï‡∏¥‡∏ó‡∏µ‡πà
                                2</button>
                            <button onclick="switchTab(3)" id="tab-3"
                                class="tab-btn border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm">‡∏°‡∏¥‡∏ï‡∏¥‡∏ó‡∏µ‡πà
                                3</button>
                            <button onclick="switchTab(4)" id="tab-4"
                                class="tab-btn border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-200 whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm">‡∏°‡∏¥‡∏ï‡∏¥‡∏ó‡∏µ‡πà
                                4</button>
                        </nav>
                    </div>

                    <!-- Content -->
                    <div id="tab-content-1" class="tab-content block"></div>
                    <div id="tab-content-2" class="tab-content hidden"></div>
                    <div id="tab-content-3" class="tab-content hidden"></div>
                    <div id="tab-content-4" class="tab-content hidden"></div>

                </div>

                <div class="bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 flex justify-end gap-2"
                    id="detail-modal-footer">
                    <button type="button" onclick="closeDetailModal()"
                        class="w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:w-auto sm:text-sm dark:bg-gray-600 dark:text-white dark:border-gray-500 dark:hover:bg-gray-500">‡∏õ‡∏¥‡∏î</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Criteria View Modal -->
    <div id="criteriaModal" class="fixed inset-0 z-[60] hidden overflow-y-auto" aria-labelledby="criteria-modal-title"
        role="dialog" aria-modal="true">
        <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity dark:bg-gray-900 dark:bg-opacity-80"
                aria-hidden="true" onclick="closeCriteriaModal()"></div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>

            <div
                class="inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full">
                <div class="bg-info px-4 py-3 sm:px-6 flex justify-between items-center border-b dark:border-gray-600">
                    <div class="flex items-center gap-2">
                        <span class="text-white text-xl">‚ÑπÔ∏è</span>
                        <h3 class="text-lg leading-6 font-bold text-white" id="criteria-modal-title">
                            ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ï‡∏±‡∏ß‡∏ä‡∏µ‡πâ‡∏ß‡∏±‡∏î</h3>
                    </div>
                    <button type="button" onclick="closeCriteriaModal()"
                        class="text-white hover:text-gray-200 text-2xl">&times;</button>
                </div>

                <div class="px-4 py-5 sm:p-6 max-h-[70vh] overflow-y-auto">
                    <div class="mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                        <span class="text-xs text-gray-500 dark:text-gray-400">‡∏ï‡∏±‡∏ß‡∏ä‡∏µ‡πâ‡∏ß‡∏±‡∏î:</span>
                        <span id="criteria-indicator-code" class="font-bold text-lg text-primary ml-2">-</span>
                        <span id="criteria-indicator-type"
                            class="text-xs text-gray-500 dark:text-gray-400 ml-2">(‡∏™‡∏´‡∏Å‡∏£‡∏ì‡πå)</span>
                    </div>

                    <!-- Criteria Content (Rendered HTML + MathJax) -->
                    <div id="criteria-content" class="prose dark:prose-invert max-w-none criteria-content">
                        <p class="text-gray-500 dark:text-gray-400 italic text-center py-8">
                            ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏ä‡∏µ‡πâ‡∏ß‡∏±‡∏î‡∏ô‡∏µ‡πâ</p>
                    </div>
                </div>

                <div class="bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 flex justify-end gap-2"
                    id="criteria-modal-footer">
                    <button type="button" id="criteria-edit-btn" onclick="openCriteriaEditor()"
                        class="hidden inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-yellow-500 text-white font-medium hover:bg-yellow-600 focus:outline-none sm:text-sm">‚úèÔ∏è
                        ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                    <button type="button" onclick="closeCriteriaModal()"
                        class="inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-gray-700 hover:bg-gray-50 focus:outline-none sm:text-sm dark:bg-gray-600 dark:text-white dark:border-gray-500 dark:hover:bg-gray-500">‡∏õ‡∏¥‡∏î</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Criteria Editor Modal (Admin Only) -->
    <div id="criteriaEditorModal" class="fixed inset-0 z-[70] hidden overflow-y-auto"
        aria-labelledby="criteria-editor-title" role="dialog" aria-modal="true">
        <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity dark:bg-gray-900 dark:bg-opacity-80"
                aria-hidden="true"></div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>

            <div
                class="inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full">
                <div
                    class="bg-yellow-500 px-4 py-3 sm:px-6 flex justify-between items-center border-b dark:border-gray-600">
                    <div class="flex items-center gap-2">
                        <span class="text-white text-xl">‚úèÔ∏è</span>
                        <h3 class="text-lg leading-6 font-bold text-white" id="criteria-editor-title">
                            ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ï‡∏±‡∏ß‡∏ä‡∏µ‡πâ‡∏ß‡∏±‡∏î</h3>
                    </div>
                    <button type="button" onclick="closeCriteriaEditor()"
                        class="text-white hover:text-gray-200 text-2xl">&times;</button>
                </div>

                <div class="px-4 py-5 sm:p-6">
                    <div class="mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg flex items-center justify-between">
                        <div>
                            <span class="text-xs text-gray-500 dark:text-gray-400">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏Å‡∏ì‡∏ë‡πå:</span>
                            <span id="editor-indicator-code" class="font-bold text-lg text-primary ml-2">-</span>
                            <span id="editor-indicator-type"
                                class="text-xs text-gray-500 dark:text-gray-400 ml-2">(‡∏™‡∏´‡∏Å‡∏£‡∏ì‡πå)</span>
                        </div>
                        <div class="text-xs text-gray-400">
                            üí° ‡∏™‡∏π‡∏ï‡∏£: <code class="bg-gray-200 dark:bg-gray-600 px-1 rounded">$$\frac{a}{b}$$</code>
                            ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏®‡∏©‡∏™‡πà‡∏ß‡∏ô
                        </div>
                    </div>

                    <!-- Quill Editor Container -->
                    <div id="criteria-editor-container" class="bg-white dark:bg-gray-800 rounded"
                        style="height: 300px;"></div>
                </div>

                <div class="bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 flex justify-end gap-2">
                    <button type="button" onclick="saveCriteriaContent()"
                        class="inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-white font-medium hover:bg-green-700 focus:outline-none sm:text-sm">üíæ
                        ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                    <button type="button" onclick="closeCriteriaEditor()"
                        class="inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-gray-700 hover:bg-gray-50 focus:outline-none sm:text-sm dark:bg-gray-600 dark:text-white dark:border-gray-500 dark:hover:bg-gray-500">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/api-client.js"></script>
    <script src="js/app.js"></script>

</body>

</html>